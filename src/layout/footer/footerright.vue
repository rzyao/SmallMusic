<template>
  <div class="footer-right-box">
    <div class="left">
      <div class="button word word-open cursor-pointer" v-if="wordOpen" @click="openAndCloseWord">
        <svg
          t="1669663927302"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3042"
          width="30"
          height="30"
        >
          <path
            d="M512 0c282.766222 0 512 229.233778 512 512s-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0z m0 64C264.590222 64 64 264.590222 64 512S264.590222 960 512 960 960 759.409778 960 512 759.409778 64 512 64z m262.826667 183.694222V727.04c0 29.411556-6.883556 43.804444-25.656889 51.313778-20.024889 8.135111-53.191111 8.760889-103.879111 8.760889-2.503111-12.515556-9.386667-34.417778-15.644445-46.307556 38.172444 1.877333 75.093333 1.251556 86.357334 0.625778 10.638222 0 14.392889-3.754667 14.392888-14.392889V290.872889h-300.373333V247.694222H774.826667z m-408.007111 163.953778v263.452444l64.455111-45.056c3.128889 12.515556 10.012444 30.037333 13.767111 38.798223-98.929778 73.898667-118.414222 88.206222-128.142222 100.209777l-1.393778 1.792c-5.006222-9.386667-18.147556-25.031111-26.282667-31.914666 11.889778-9.386667 33.792-32.540444 33.792-63.829334v-219.022222H230.4v-44.430222h136.419556z m288.483555 43.804444v198.997334H512v41.927111h-41.927111v-240.924445h185.230222z m-41.927111 40.049778H512v118.272h101.376V495.502222z m71.964444-142.677333v40.049778h-239.672888v-40.049778h239.672888zM297.984 235.804444c33.166222 28.16 75.719111 66.958222 95.744 92.615112l-31.288889 32.540444c-18.773333-26.282667-60.700444-67.584-94.492444-96.369778z"
            p-id="3043"
            fill="#333333"
          ></path>
        </svg>
      </div>
      <div class="button word word-close cursor-pointer" v-if="!wordOpen" @click="openAndCloseWord">
        <svg
          t="1669663927302"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="3042"
          width="200"
          height="200"
        >
          <path
            d="M512 0c282.766222 0 512 229.233778 512 512s-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0z m0 64C264.590222 64 64 264.590222 64 512S264.590222 960 512 960 960 759.409778 960 512 759.409778 64 512 64z m262.826667 183.694222V727.04c0 29.411556-6.883556 43.804444-25.656889 51.313778-20.024889 8.135111-53.191111 8.760889-103.879111 8.760889-2.503111-12.515556-9.386667-34.417778-15.644445-46.307556 38.172444 1.877333 75.093333 1.251556 86.357334 0.625778 10.638222 0 14.392889-3.754667 14.392888-14.392889V290.872889h-300.373333V247.694222H774.826667z m-408.007111 163.953778v263.452444l64.455111-45.056c3.128889 12.515556 10.012444 30.037333 13.767111 38.798223-98.929778 73.898667-118.414222 88.206222-128.142222 100.209777l-1.393778 1.792c-5.006222-9.386667-18.147556-25.031111-26.282667-31.914666 11.889778-9.386667 33.792-32.540444 33.792-63.829334v-219.022222H230.4v-44.430222h136.419556z m288.483555 43.804444v198.997334H512v41.927111h-41.927111v-240.924445h185.230222z m-41.927111 40.049778H512v118.272h101.376V495.502222z m71.964444-142.677333v40.049778h-239.672888v-40.049778h239.672888zM297.984 235.804444c33.166222 28.16 75.719111 66.958222 95.744 92.615112l-31.288889 32.540444c-18.773333-26.282667-60.700444-67.584-94.492444-96.369778z"
            p-id="3043"
            fill="#abaaaa"
          ></path>
        </svg>
      </div>
      <div class="button like add-like cursor-pointer" v-if="!isLike" @click="changeLike">
        <svg
          t="1670424756118"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="10439"
          width="32"
          height="32"
        >
          <path
            d="M523.733333 841.024l33.173334-32.576 99.690666-97.813333c70.976-69.632 120.32-117.973333 138.709334-135.893334 59.008-57.514667 93.248-121.28 99.626666-184.234666 6.250667-61.44-15.488-119.744-61.589333-164.672-44.992-43.84-98.88-61.909333-157.034667-52.906667-49.365333 7.616-101.034667 34.624-150.016 78.848a21.333333 21.333333 0 0 1-28.586666 0c-48.981333-44.224-100.650667-71.232-150.016-78.869333-58.154667-8.96-112.042667 9.088-157.034667 52.928-46.101333 44.928-67.84 103.210667-61.610667 164.693333 6.4 62.933333 40.64 126.72 99.648 184.213333a100207.573333 100207.573333 0 0 1 145.92 142.826667l24.256 23.765333L512 852.522667l11.733333-11.498667z m-11.733333 11.52l-1.493333 1.429333A2.133333 2.133333 0 0 1 512 853.333333c0.512 0 1.045333 0.213333 1.493333 0.64l-1.493333-1.450666z m157.781333-721.792c71.637333-11.093333 138.901333 11.477333 193.344 64.533333 55.317333 53.930667 81.834667 124.992 74.282667 199.530667-7.466667 73.642667-46.549333 146.368-112.32 210.474667-18.346667 17.898667-67.669333 66.218667-138.453333 135.637333-31.829333 31.232-65.706667 64.448-99.84 97.984L553.6 871.466667l-13.184 12.949333a40.554667 40.554667 0 0 1-56.832 0l-114.602667-112.64-24.213333-23.722667a677626.346667 677626.346667 0 0 0-145.856-142.762666C133.141333 541.184 94.08 468.48 86.613333 394.816c-7.552-74.538667 18.944-145.6 74.282667-199.530667 54.442667-53.056 121.706667-75.605333 193.344-64.533333 53.162667 8.213333 107.093333 34.688 157.781333 76.949333 50.709333-42.24 104.618667-68.736 157.781334-76.949333z"
            fill="#3D3D3D"
            p-id="10440"
          ></path>
        </svg>
      </div>
      <div class="button like liked cursor-pointer" v-if="isLike" @click="changeLike">
        <svg
          t="1670424651276"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="6428"
          width="32"
          height="32"
        >
          <path
            d="M669.781333 130.752c71.637333-11.093333 138.901333 11.477333 193.344 64.533333 55.317333 53.930667 81.834667 124.992 74.282667 199.530667-7.466667 73.642667-46.549333 146.368-112.32 210.474667-18.346667 17.898667-67.669333 66.218667-138.453333 135.637333-31.829333 31.232-65.706667 64.448-99.84 97.984L553.6 871.466667l-13.184 12.949333a40.554667 40.554667 0 0 1-56.832 0l-114.602667-112.64-24.213333-23.722667a677626.346667 677626.346667 0 0 0-145.856-142.762666C133.141333 541.184 94.08 468.48 86.613333 394.816c-7.552-74.538667 18.944-145.6 74.282667-199.530667 54.442667-53.056 121.706667-75.605333 193.344-64.533333 53.162667 8.213333 107.093333 34.688 157.781333 76.949333 50.709333-42.24 104.618667-68.736 157.781334-76.949333z"
            fill="#ec4141"
            p-id="6429"
          ></path>
        </svg>
      </div>
      <div class="button collect">
        <collectVue></collectVue>
      </div>
    </div>
    <div class="right">
      <voiceVue class="button"></voiceVue>
      <div class="button mode cursor-pointer" @click="songStore.changeMode">
        <div class="single-cycle" v-if="songStore.playMode == 1">
          <svg
            t="1670425135755"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="7572"
            width="32"
            height="32"
          >
            <path
              d="M192 789.333333a21.24 21.24 0 0 1-12.8-4.28 344.513333 344.513333 0 0 1-99.333333-118A341.246667 341.246667 0 0 1 384 170.666667h256q6.36 0 12.733333 0.233333l-49.153333-49.146667a21.333333 21.333333 0 0 1 30.173333-30.173333l85.333334 85.333333a21.333333 21.333333 0 0 1 0 30.173334l-85.333334 85.333333a21.333333 21.333333 0 0 1-30.173333-30.173333l48.666667-48.666667Q646.126667 213.333333 640 213.333333H384c-164.666667 0-298.666667 134-298.666667 298.666667 0 94.833333 43.546667 181.933333 119.48 238.966667A21.333333 21.333333 0 0 1 192 789.333333z m228.433333 143.06a21.333333 21.333333 0 0 0 0-30.173333l-49.153333-49.146667q6.366667 0.233333 12.733333 0.233334H640a341.46 341.46 0 0 0 304.146667-496.42 344.513333 344.513333 0 0 0-99.333334-118 21.333333 21.333333 0 1 0-25.626666 34.113333C895.12 330.066667 938.666667 417.166667 938.666667 512c0 164.666667-134 298.666667-298.666667 298.666667H384q-6.12 0-12.246667-0.246667l48.666667-48.666667a21.333333 21.333333 0 0 0-30.173333-30.173333l-85.333334 85.333333a21.333333 21.333333 0 0 0 0 30.173334l85.333334 85.333333a21.333333 21.333333 0 0 0 30.173333 0zM554.666667 618.666667V405.333333a21.333333 21.333333 0 0 0-21.333334-21.333333h-42.666666a21.333333 21.333333 0 0 0 0 42.666667h21.333333v192a21.333333 21.333333 0 0 0 42.666667 0z"
              fill="#333333"
              p-id="7573"
            ></path>
          </svg>
        </div>
        <div class="list-cycle" v-if="songStore.playMode == 2">
          <svg
            t="1670425165697"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="7734"
            width="32"
            height="32"
          >
            <path
              d="M192 789.333333a21.24 21.24 0 0 1-12.8-4.28 344.513333 344.513333 0 0 1-99.333333-118A341.246667 341.246667 0 0 1 384 170.666667h256q6.36 0 12.733333 0.233333l-49.153333-49.146667a21.333333 21.333333 0 0 1 30.173333-30.173333l85.333334 85.333333a21.333333 21.333333 0 0 1 0 30.173334l-85.333334 85.333333a21.333333 21.333333 0 0 1-30.173333-30.173333l48.666667-48.666667Q646.126667 213.333333 640 213.333333H384c-164.666667 0-298.666667 134-298.666667 298.666667 0 94.833333 43.546667 181.933333 119.48 238.966667A21.333333 21.333333 0 0 1 192 789.333333z m228.433333 143.06a21.333333 21.333333 0 0 0 0-30.173333l-49.153333-49.146667q6.366667 0.233333 12.733333 0.233334H640a341.46 341.46 0 0 0 304.146667-496.42 344.513333 344.513333 0 0 0-99.333334-118 21.333333 21.333333 0 1 0-25.626666 34.113333C895.12 330.066667 938.666667 417.166667 938.666667 512c0 164.666667-134 298.666667-298.666667 298.666667H384q-6.12 0-12.246667-0.246667l48.666667-48.666667a21.333333 21.333333 0 0 0-30.173333-30.173333l-85.333334 85.333333a21.333333 21.333333 0 0 0 0 30.173334l85.333334 85.333333a21.333333 21.333333 0 0 0 30.173333 0zM384 533.333333a21.333333 21.333333 0 1 1-21.333333-21.333333 21.333333 21.333333 0 0 1 21.333333 21.333333z m149.333333-21.333333a21.333333 21.333333 0 1 0 21.333334 21.333333 21.333333 21.333333 0 0 0-21.333334-21.333333z m170.666667 0a21.333333 21.333333 0 1 0 21.333333 21.333333 21.333333 21.333333 0 0 0-21.333333-21.333333z"
              fill="#333333"
              p-id="7735"
            ></path>
          </svg>
        </div>
        <div class="random" v-if="songStore.playMode == 3">
          <svg
            t="1670425197033"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="7894"
            width="30"
            height="30"
          >
            <path
              d="M682.48 297.633333L332.666667 752.386667A149.333333 149.333333 0 0 1 214.306667 810.666667H64a21.333333 21.333333 0 0 1 0-42.666667h150.306667a107.333333 107.333333 0 0 0 84.546666-41.633333L648.666667 271.613333A149.333333 149.333333 0 0 1 767.026667 213.333333h141.473333l-48.92-48.913333a21.333333 21.333333 0 0 1 30.173333-30.173333l85.333334 85.333333a21.333333 21.333333 0 0 1 0 30.173333l-85.333334 85.333334a21.333333 21.333333 0 0 1-30.173333-30.173334l48.92-48.913333h-141.473333a107.333333 107.333333 0 0 0-84.546667 41.633333zM64 256h150.306667a107.333333 107.333333 0 0 1 84.546666 41.633333l109.26 142.04a21.333333 21.333333 0 0 0 33.82-26L332.666667 271.613333A149.333333 149.333333 0 0 0 214.306667 213.333333H64a21.333333 21.333333 0 0 0 0 42.666667z m825.753333 432.913333a21.333333 21.333333 0 0 0-30.173333 30.173334l48.92 48.913333h-141.473333a107.333333 107.333333 0 0 1-84.546667-41.633333L573.22 584.326667a21.333333 21.333333 0 0 0-33.82 26L648.666667 752.386667a149.333333 149.333333 0 0 0 118.36 58.28h141.473333l-48.92 48.913333a21.333333 21.333333 0 0 0 30.173333 30.173333l85.333334-85.333333a21.333333 21.333333 0 0 0 0-30.173333z"
              fill="#333333"
              p-id="7895"
            ></path>
          </svg>
        </div>
      </div>
      <div class="button list cursor-pointer" @click="showCurrentList">
        <svg
          t="1670427187145"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="9166"
          width="32"
          height="32"
        >
          <path
            d="M981.333333 917.333333a21.333333 21.333333 0 0 1-21.333333 21.333334H64a21.333333 21.333333 0 0 1 0-42.666667h896a21.333333 21.333333 0 0 1 21.333333 21.333333zM661.333333 170.666667h298.666667a21.333333 21.333333 0 0 0 0-42.666667H661.333333a21.333333 21.333333 0 0 0 0 42.666667z m0 384h298.666667a21.333333 21.333333 0 0 0 0-42.666667H661.333333a21.333333 21.333333 0 0 0 0 42.666667zM512.413333 127.586667a143.333333 143.333333 0 0 1 42.253334 102c0 35.653333-2.813333 69.166667-37.406667 118.366666-33.333333 47.4-96.486667 109.586667-204.78 201.633334a21.333333 21.333333 0 0 1-27.626667 0C176.56 457.54 113.4 395.333333 80.073333 347.953333 45.48 298.753333 42.666667 265.24 42.666667 229.586667a144.266667 144.266667 0 0 1 256-91.246667 144.266667 144.266667 0 0 1 213.746666-10.753333z m-0.413333 102c0-56-45.573333-101.586667-101.586667-101.586667a101.933333 101.933333 0 0 0-92.36 59.22 21.333333 21.333333 0 0 1-38.773333 0A101.933333 101.933333 0 0 0 186.92 128C130.906667 128 85.333333 173.573333 85.333333 229.586667c0 31.206667 2.06 54.6 29.64 93.82C144.753333 365.766667 201.686667 422.173333 298.666667 505.286667c96.98-83.113333 153.913333-139.52 183.693333-181.88C509.94 284.186667 512 260.793333 512 229.586667z"
            fill="#333333"
            p-id="9167"
          ></path>
        </svg>
        <CurrentList v-model:show="isShowCurrentList"></CurrentList>
        <div v-if="isShowCurrentList"></div>
      </div>
    </div>
  </div>
</template>
<script lang="ts">
import { ref, computed } from 'vue';
import voiceVue from './voice/voice.vue';
import collectVue from './collect/collect.vue';
import CurrentList from '@/views/CurrentList/CurrentList.vue';
import { useSongStore } from '@/stores/song';
import { useFavorite } from '@/stores/favorite';
export default {
  name: 'FooterRight',
  components: { voiceVue, collectVue, CurrentList },
  setup() {
    const voice = ref(true);
    const wordOpen = ref(false);
    const isSave = ref(false);
    const songStore = useSongStore();
    const favoriteStore = useFavorite();
    const isLike = computed(() => {
      return favoriteStore.favoriteList.findIndex((item) => item.id === songStore.currentId) > -1;
    });
    let currentId = computed(() => {
      return songStore.currentId;
    });
    async function changeLike() {
      const id = currentId.value;
      const res = await favoriteStore.changeFavorite(String(id));
      console.log('changeLike  res');
      console.log(isLike.value);
      console.log(songStore.currentId);
      console.log(favoriteStore.favoriteList);
      console.log(
        favoriteStore.favoriteList.findIndex((item) => item.id === songStore.currentId) > -1
      );
    }
    const openAndCloseVoice = (): void => {
      voice.value = !voice.value;
    };
    const openAndCloseWord = (): void => {
      wordOpen.value = !wordOpen.value;
    };
    const isShowCurrentList = ref(false);
    function showCurrentList() {
      isShowCurrentList.value = !isShowCurrentList.value;
    }
    return {
      voice,
      wordOpen,
      isLike,
      isSave,
      changeLike,
      openAndCloseVoice,
      openAndCloseWord,
      isShowCurrentList,
      showCurrentList,
      songStore,
    };
  },
};
</script>
<style lang="less" scoped>
@import '@/layout/footer/footerright.less';
</style>
